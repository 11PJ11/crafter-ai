---
template_type: "platform-review-checklist"
methodology: "nWave ATDD"
wave: "DESIGN"
description: "Platform architecture review checklist for CI/CD, infrastructure, and observability designs"
version: "1.0.0"

# ==================================================================================
# PLATFORM ARCHITECTURE REVIEW CHECKLIST
# ==================================================================================

metadata:
  template_name: "Platform Design Review Checklist"
  reviewer_focus: "CI/CD quality, infrastructure security, operational readiness"
  severity_levels: ["BLOCKING", "MAJOR", "MINOR", "SUGGESTION"]

# ==================================================================================
# CI/CD PIPELINE REVIEW
# ==================================================================================

pipeline_review:
  stage_completeness:
    - check: "Validate stage present"
      rationale: "Fast feedback on code quality"
      severity: "BLOCKING"

    - check: "Test stage present with adequate coverage"
      rationale: "Verify code correctness"
      severity: "BLOCKING"

    - check: "Security stage present (SAST/SCA)"
      rationale: "Shift-left security"
      severity: "BLOCKING"

    - check: "Build stage produces versioned artifacts"
      rationale: "Reproducible deployments"
      severity: "MAJOR"

    - check: "Deploy stage has environment separation"
      rationale: "Safe promotion path"
      severity: "MAJOR"

  quality_gates:
    - check: "Test coverage threshold defined"
      rationale: "Maintain code quality"
      severity: "MAJOR"

    - check: "Security vulnerability thresholds defined"
      rationale: "Prevent vulnerable deployments"
      severity: "BLOCKING"

    - check: "Build time targets defined"
      rationale: "DORA metric: Lead time"
      severity: "MINOR"

  failure_recovery:
    - check: "Pipeline failure notifications configured"
      rationale: "Fast feedback to developers"
      severity: "MAJOR"

    - check: "Retry logic for transient failures"
      rationale: "Resilient pipelines"
      severity: "MINOR"

    - check: "Rollback mechanism documented"
      rationale: "Recovery capability"
      severity: "BLOCKING"

# ==================================================================================
# INFRASTRUCTURE REVIEW
# ==================================================================================

infrastructure_review:
  iac_quality:
    - check: "All infrastructure defined as code"
      rationale: "No manual changes"
      severity: "BLOCKING"

    - check: "Modules are reusable and parameterized"
      rationale: "DRY principle"
      severity: "MAJOR"

    - check: "State management is secure"
      rationale: "State encryption and locking"
      severity: "BLOCKING"

    - check: "Environment parity maintained"
      rationale: "Dev/staging/prod consistency"
      severity: "MAJOR"

  security:
    - check: "Least privilege IAM policies"
      rationale: "Minimize attack surface"
      severity: "BLOCKING"

    - check: "Network segmentation implemented"
      rationale: "Defense in depth"
      severity: "MAJOR"

    - check: "Secrets not in code or state"
      rationale: "Credential security"
      severity: "BLOCKING"

    - check: "Encryption at rest and in transit"
      rationale: "Data protection"
      severity: "MAJOR"

  scalability:
    - check: "Auto-scaling configured"
      rationale: "Handle load variations"
      severity: "MAJOR"

    - check: "Resource limits defined"
      rationale: "Prevent runaway costs"
      severity: "MAJOR"

# ==================================================================================
# DEPLOYMENT STRATEGY REVIEW
# ==================================================================================

deployment_review:
  safety:
    - check: "Rollback capability documented"
      rationale: "Recovery from bad deployments"
      severity: "BLOCKING"

    - check: "Health checks defined"
      rationale: "Detect failed deployments"
      severity: "BLOCKING"

    - check: "Deployment approval gates for production"
      rationale: "Human oversight for critical changes"
      severity: "MAJOR"

  strategy_appropriateness:
    - check: "Deployment strategy matches risk profile"
      rationale: "Right tool for the job"
      severity: "MAJOR"

    - check: "Database migration strategy defined"
      rationale: "Data consistency during deployment"
      severity: "BLOCKING"

    - check: "Feature flag strategy for risky changes"
      rationale: "Gradual rollout capability"
      severity: "MINOR"

# ==================================================================================
# OBSERVABILITY REVIEW
# ==================================================================================

observability_review:
  coverage:
    - check: "Metrics for golden signals (latency, traffic, errors, saturation)"
      rationale: "Core observability"
      severity: "BLOCKING"

    - check: "Structured logging implemented"
      rationale: "Searchable, parseable logs"
      severity: "MAJOR"

    - check: "Distributed tracing enabled"
      rationale: "Request flow visibility"
      severity: "MAJOR"

  slo_definition:
    - check: "SLOs defined for critical user journeys"
      rationale: "Reliability targets"
      severity: "BLOCKING"

    - check: "Error budget policy documented"
      rationale: "Balance reliability vs velocity"
      severity: "MAJOR"

  alerting:
    - check: "SLO-based alerting configured"
      rationale: "Alert on what matters"
      severity: "MAJOR"

    - check: "Escalation path defined"
      rationale: "Incident response"
      severity: "MAJOR"

    - check: "Runbooks linked to alerts"
      rationale: "Actionable alerts"
      severity: "MINOR"

  dashboards:
    - check: "Service health dashboard exists"
      rationale: "At-a-glance status"
      severity: "MAJOR"

    - check: "Business metrics dashboard exists"
      rationale: "Business impact visibility"
      severity: "MINOR"

# ==================================================================================
# DORA METRICS ALIGNMENT
# ==================================================================================

dora_metrics_review:
  - check: "Deployment frequency can be measured"
    rationale: "DORA key metric"
    severity: "MAJOR"

  - check: "Lead time for changes can be measured"
    rationale: "DORA key metric"
    severity: "MAJOR"

  - check: "Change failure rate can be measured"
    rationale: "DORA key metric"
    severity: "MAJOR"

  - check: "Mean time to recovery can be measured"
    rationale: "DORA key metric"
    severity: "MAJOR"

# ==================================================================================
# SECURITY REVIEW
# ==================================================================================

security_review:
  pipeline_security:
    - check: "SAST integrated in pipeline"
      rationale: "Find vulnerabilities in code"
      severity: "BLOCKING"

    - check: "Dependency scanning (SCA) integrated"
      rationale: "Find vulnerable dependencies"
      severity: "BLOCKING"

    - check: "Secret scanning in place"
      rationale: "Prevent credential leaks"
      severity: "BLOCKING"

    - check: "Container image scanning"
      rationale: "Secure base images"
      severity: "MAJOR"

  supply_chain:
    - check: "SBOM generation configured"
      rationale: "Software bill of materials"
      severity: "MAJOR"

    - check: "Artifact signing implemented"
      rationale: "Verify artifact integrity"
      severity: "MAJOR"

    - check: "Trusted registries only"
      rationale: "Prevent malicious dependencies"
      severity: "MAJOR"

# ==================================================================================
# REVIEW VERDICT CRITERIA
# ==================================================================================

verdict_criteria:
  approved:
    conditions:
      - "0 BLOCKING issues"
      - "<= 2 MAJOR issues with mitigation plan"
    action: "Proceed to DISTILL wave"

  conditional:
    conditions:
      - "0 BLOCKING issues"
      - "> 2 MAJOR issues"
    action: "Fix MAJOR issues, re-review"

  rejected:
    conditions:
      - ">= 1 BLOCKING issues"
    action: "Fix BLOCKING issues, full re-review"
