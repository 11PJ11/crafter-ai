{
  "task_specification": {
    "task_id": "04-02",
    "project_id": "des",
    "task_name": "Add error handling and edge cases",
    "description": "Implement comprehensive error handling for DESOrchestrator with edge case coverage.\nHandle malformed commands, missing step files, invalid validation levels, and null/empty inputs.",
    "acceptance_criteria": [
      "Graceful handling of malformed command strings",
      "Proper error messages for missing step files",
      "Validation for null/empty command parameters",
      "Edge case tests for boundary conditions",
      "Error handling unit tests with >90% coverage"
    ],
    "requires": ["04-01"],
    "estimated_hours": 2,
    "implementation_notes": "- Handle FileNotFoundError for missing step files\n- Validate command parameter is not null/empty\n- Add try-except blocks for marker generation\n- Test edge cases: empty strings, None, malformed paths\n- Document error behavior in docstrings"
  },
  "tdd_cycle": {
    "acceptance_test": {
      "scenario_name": "All 4 acceptance tests (regression suite)",
      "test_file": "tests/acceptance/test_us001_command_filtering.py",
      "test_file_format": "py_pytest",
      "scenario_index": 0,
      "initially_ignored": false,
      "is_walking_skeleton": false
    },
    "expected_unit_tests": [],
    "mock_boundaries": {
      "allowed_ports": [],
      "forbidden_domain_classes": [],
      "in_memory_adapters": []
    },
    "tdd_phase_tracking": {
      "current_phase": "NOT_STARTED",
      "active_e2e_test": "",
      "inactive_e2e_tests": "All other @skip scenarios remain disabled",
      "phases_completed": []
    },
    "phase_execution_log": [
      {"phase_name": "PREPARE", "phase_index": 0, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "RED_ACCEPTANCE", "phase_index": 1, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "RED_UNIT", "phase_index": 2, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "GREEN_UNIT", "phase_index": 3, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "CHECK_ACCEPTANCE", "phase_index": 4, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "GREEN_ACCEPTANCE", "phase_index": 5, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "REVIEW", "phase_index": 6, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "REFACTOR_L1", "phase_index": 7, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "REFACTOR_L2", "phase_index": 8, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "REFACTOR_L3", "phase_index": 9, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "REFACTOR_L4", "phase_index": 10, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "POST_REFACTOR_REVIEW", "phase_index": 11, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "FINAL_VALIDATE", "phase_index": 12, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []},
      {"phase_name": "COMMIT", "phase_index": 13, "status": "NOT_EXECUTED", "started_at": null, "ended_at": null, "duration_minutes": null, "outcome": null, "outcome_details": null, "artifacts_created": [], "artifacts_modified": [], "test_results": {"total": null, "passed": null, "failed": null, "skipped": null}, "notes": null, "blocked_by": null, "history": []}
    ]
  },
  "quality_gates": {
    "acceptance_test_must_fail_first": true,
    "unit_tests_must_fail_first": true,
    "no_mocks_inside_hexagon": true,
    "business_language_required": true,
    "refactor_level": 4,
    "in_memory_test_ratio_target": 0.8,
    "validation_after_each_phase": true,
    "validation_after_each_review": true,
    "validation_after_each_refactor": true,
    "all_14_phases_mandatory": true,
    "phase_documentation_required": true
  },
  "validation": {
    "status": "approved",
    "reviewer": "software-crafter-reviewer",
    "reviewed_at": "2026-01-23T00:00:00Z",
    "notes": "Step file meets all quality gates. JSON schema compliant, all 14 phases present in compact format, acceptance criteria clear and testable with comprehensive error handling requirements, dependencies correctly mapped (requires 04-01), task specification is self-contained and atomic. Proper edge case and error handling coverage specified.",
    "issues": []
  }
}
