meta:
  generated_at: "2026-02-06T20:50:00Z"
  generated_by: "vera-orchestrator"
  project: "modern-cli-installer"
  phase: "tui-revamp"
  phase_name: "Revamp install_nwave.py stdout to Luna TUI format"
  schema_version: "0.2"

step:
  id: "tui-07"
  name: "Replace plugin installation messages with TUI emoji format"
  agent: "software-crafter"
  dependencies_satisfied: true

input:
  source_files:
    - "scripts/install/plugins/agents_plugin.py"
    - "scripts/install/plugins/commands_plugin.py"
    - "scripts/install/plugins/templates_plugin.py"
    - "scripts/install/plugins/utilities_plugin.py"

  requirements:
    agents_plugin:
      - "Line 33: context.logger.info('Installing agents plugin...') â†’ context.logger.info('  ðŸ“¦ Installing agents...')"
      - "Line 57-58: context.logger.info(f'Installing from built distribution ({dist_agent_count} agents)...') â†’ context.logger.info(f'  â³ From distribution ({dist_agent_count} agents)...')"
      - "Line 62-63: context.logger.info(f'Using source files ({source_agent_count} agents)...') â†’ context.logger.info(f'  â³ From source ({source_agent_count} agents)...')"
      - "Line 75: context.logger.info(f'Installed {copied_count} agent files') â†’ context.logger.info(f'  âœ… Agents installed ({copied_count} files)')"

    commands_plugin:
      - "Line 35: context.logger.info('Installing commands plugin...') â†’ context.logger.info('  ðŸ“¦ Installing commands...')"
      - "Line 66: context.logger.info(f'Installed {copied_count} command files') â†’ context.logger.info(f'  âœ… Commands installed ({copied_count} files)')"

    templates_plugin:
      - "Line 35: context.logger.info('Installing templates plugin...') â†’ context.logger.info('  ðŸ“¦ Installing templates...')"
      - "Line 74: context.logger.info(f'Installed {copied_count} template files') â†’ context.logger.info(f'  âœ… Templates installed ({copied_count} files)')"

    utilities_plugin:
      - "Line 39: context.logger.info('Installing utilities plugin...') â†’ context.logger.info('  ðŸ“¦ Installing utilities...')"
      - "Line 68-69: context.logger.info(f'Upgraded {script_name} ({target_ver} -> {source_ver})') â†’ context.logger.info(f'  âœ… {script_name} upgraded ({target_ver} â†’ {source_ver})')"
      - "Line 75: context.logger.info(f'Installed {script_name} (v{source_ver})') â†’ context.logger.info(f'  âœ… {script_name} installed (v{source_ver})')"
      - "Line 79-80: context.logger.info(f'{script_name} already up-to-date (v{target_ver})') â†’ context.logger.info(f'  âœ… {script_name} up-to-date (v{target_ver})')"
      - "Line 84: context.logger.info(f'Installed {installed_count} utility script(s)') â†’ context.logger.info(f'  âœ… Utilities installed ({installed_count} scripts)')"

  pragmatic_rules:
    - "Mechanical string replacements only. Keep all variable names exactly as they are."
    - "All calls remain context.logger.info() - only the message string changes"
    - "DO NOT change any logic, file operations, or return values"
    - "DO NOT create new files, classes, or methods"
    - "DO NOT touch install_nwave.py or install_utils.py"

  test_requirements:
    - "All existing tests must still pass"
    - "Run: pytest tests/ -k 'plugin or install_nwave' -v --tb=short"

constraints:
  max_tool_calls: 12
  must_run_tests: true
  fail_fast: true
  forbidden_actions:
    - "DO NOT create new files or tests"
    - "DO NOT read roadmap.yaml or execution-status.yaml"
    - "DO NOT modify any logic in the plugin files"
    - "DO NOT touch install_nwave.py or install_utils.py"
    - "ONLY change message strings inside context.logger.info() calls"

output:
  status: "success"
  artifacts_modified:
    - "scripts/install/plugins/agents_plugin.py"
    - "scripts/install/plugins/commands_plugin.py"
    - "scripts/install/plugins/templates_plugin.py"
    - "scripts/install/plugins/utilities_plugin.py"
  test_command: "pytest tests/ -k 'plugin or install_nwave' -v --tb=short"
  test_result: "283 passed, 1 failed (pre-existing: test_all_des_submodules_should_be_importable), 2819 deselected"
  commit_hash: "8178208"
  commit_message: "style(installer): replace plugin messages with TUI emoji format"
  notes: "13 mechanical string replacements across 4 plugin files. The 1 failure is pre-existing (verified by stash/unstash). No logic, control flow, or variable names changed."
