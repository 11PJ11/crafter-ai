# Version Update Experience - Measurement Baseline
# Created: 2026-01-25T19:00:00Z

baseline:
  project_id: version-update-experience
  created_at: "2026-01-25T19:00:00Z"
  feature_description: "Automated version update system with backup/restore, breaking change detection, and conventional commit enforcement"

  validation:
    status: approved
    methodology: file_system_inspection
    reviewed_by: software-crafter-reviewer
    reviewed_at: "2026-01-25T19:15:00Z"
    notes: |
      APPROVED - All criteria satisfied:
      ✓ All metrics have current/target/unit/method
      ✓ Measurements align with 7 user stories, 24 acceptance tests
      ✓ Success criteria quantifiable (numeric targets)
      ✓ No placeholder values (not_measured is appropriate for pre-implementation)
      ✓ Evidence commands reproducible with standard tools

# Current State → Target State Deltas
measurements:
  # Tests
  acceptance_tests_passing:
    current: 1
    target: 24
    unit: count
    method: "pytest tests/acceptance/features/version-update-experience/"

  acceptance_test_pass_rate:
    current: 4.2
    target: 100
    unit: percentage
    method: "pytest --tb=no | grep passed"

  # Core Components (exist: false → true)
  components_implemented:
    current: 0
    target: 15
    unit: count
    components:
      - nWave/cli/version_cli.py
      - nWave/cli/update_cli.py
      - nWave/core/version_manager.py
      - nWave/core/update_orchestrator.py
      - nWave/core/changelog_processor.py
      - nWave/adapters/github_adapter.py
      - nWave/adapters/file_system_adapter.py
      - nWave/adapters/console_ui_adapter.py
      - nWave/tasks/nw/version.md
      - nWave/tasks/nw/update.md
      - commitlint.config.js
      - .releaserc
      - .github/workflows/release.yml
      - nWave/VERSION
      - scripts/emergency_restore.py

  # Safety Mechanisms (all false → true)
  safety_features_implemented:
    current: 0
    target: 5
    unit: count
    features:
      - backup_before_update
      - automatic_rollback_on_failure
      - disk_space_preflight_check
      - permission_preflight_check
      - lock_file_mechanism

  # Architecture Quality
  hexagonal_boundary_violations:
    current: not_measured
    target: 0
    unit: count
    method: "grep -r 'from.*adapters' nWave/core/ || echo 0"

  # Performance
  version_check_response_time:
    current: not_measured
    target: 3
    unit: seconds
    method: "time python3 ~/.claude/nWave/cli/version_cli.py"

  update_completion_time:
    current: not_measured
    target: 300
    unit: seconds
    method: "time full update workflow"

  # Reliability
  rollback_success_rate:
    current: 0
    target: 100
    unit: percentage
    method: "Simulate failures, measure rollback completions"

  backup_creation_success_rate:
    current: 0
    target: 100
    unit: percentage
    method: "Monitor backup creation in logs"

  # Git Workflow
  conventional_commit_enforcement_rate:
    current: 0
    target: 100
    unit: percentage
    method: "commitlint hook rejects invalid formats"

# User Story Implementation Status
user_stories:
  US-001: {tests: 3, passing: 0, components: 0, target_components: 3}
  US-002: {tests: 6, passing: 0, components: 0, target_components: 4}
  US-003: {tests: 2, passing: 0, components: 0, target_components: 2}
  US-004: {tests: 4, passing: 0, components: 0, target_components: 1}
  US-005: {tests: 4, passing: 0, components: 0, target_components: 2}
  US-006: {tests: 3, passing: 0, components: 0, target_components: 2}
  US-007: {tests: 2, passing: 0, components: 0, target_components: 3}

# Success Criteria Summary (16 total, 0 met)
success_criteria_completion: 0.0  # percentage

# Blocking Dependencies
dependencies:
  - "US-005 → US-007: semantic-release requires conventional commits"
  - "US-007 → US-001/US-002/US-003: version check requires GitHub releases"
  - "US-001 → US-002: update depends on version comparison"

# Infrastructure Readiness
infrastructure:
  architecture_designed: true
  acceptance_tests_defined: true
  requirements_documented: true
  precommit_framework_exists: true
  existing_installer_reusable: true

# Evidence (measurement commands for re-validation)
evidence:
  - cmd: "find tests/acceptance/features/version-update-experience/ -name '*.feature' -exec grep -c 'Scenario:' {} + | awk '{s+=$1} END {print s}'"
    result: 24
    timestamp: "2026-01-25T19:00:00Z"
  - cmd: "pytest tests/acceptance/features/version-update-experience/ --tb=no -q 2>&1 | grep -E 'passed|failed' || echo '0 passed'"
    result: "1 passed, 23 skipped"
    timestamp: "2026-01-25T19:00:00Z"
