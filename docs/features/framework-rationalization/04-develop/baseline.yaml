# ============================================================================
# Framework Rationalization - Measurement Baseline
# ============================================================================
# Created: 2026-01-20T12:00:00Z
# Project: framework-rationalization
# Purpose: Quantitative baseline for DEVELOP wave implementation tracking
# ============================================================================

baseline:
  project_id: framework-rationalization
  created_at: "2026-01-20T12:00:00Z"
  framework_version: "1.2.51"
  version_measurement:
    measurement_command: "grep -E 'version:' nWave/framework-catalog.yaml | head -1"
    measured_value: "1.2.51"
    verification_timestamp: "2026-01-20T15:12:40Z"

  validation:
    status: complete
    methodology: file_system_inspection
    tools_used:
      - glob_pattern_matching
      - grep_content_search
      - file_counting
      - line_inspection

# ============================================================================
# CURRENT STATE MEASUREMENTS
# ============================================================================

current_state:

  # Phase 0: Agent and Template Rationalization
  phase_0_template_rationalization:
    existing_commands_count: 20
    command_template_exists: true
    command_template_path: "nWave/templates/COMMAND_TEMPLATE.yaml"
    command_template_lines: 182
    agent_builder_has_command_template_reference: false
    agent_builder_has_forge_command_capability: false
    agent_builder_reviewer_validates_commands: false
    commands_analyzed_for_compliance: 0
    commands_exceeding_60_lines: 17
    commands_exceeding_60_lines_measurement:
      measurement_command: "wc -l nWave/tasks/nw/*.md | sort -n | awk '$1 > 60 {count++} END {print count}'"
      measured_value: 17
      verification_timestamp: "2026-01-20T15:12:40Z"
      note: "17 task files exceed 60 lines - indicates some commands are complex and may need simplification"

  # Phase 1: Platform Abstraction Layer
  phase_1_platform_abstraction:
    supported_platforms_count: 1
    supported_platforms:
      - name: "claude-code"
        output_dir: "dist/ide"
        status: "implemented"
    platform_abstraction_layer_exists: false
    platform_registry_exists: false
    platform_formatter_files:
      base_py: false
      claude_py: false
      codex_py: false
      init_py: false
    tools_platforms_directory_exists: false
    multi_platform_build_enabled: false

  # Phase 2: BUILD:INCLUDE Mechanism
  phase_2_build_include:
    build_include_markers_in_source: 0
    build_include_mechanism_implemented: false
    build_inject_markers_in_source: 134
    build_inject_files_count: 29
    shared_content_directory_exists: false
    shared_content_directory_path: "nWave/data/core/"
    radical_candor_shared_file_exists: false
    priority_validation_shared_file_exists: false
    duplicate_content_agents_count: 110
    duplicate_content_agents_measurement:
      measurement_command: "grep -r 'BUILD:INJECT' nWave/ | wc -l"
      measured_value: 110
      verification_timestamp: "2026-01-20T15:12:40Z"
      note: "110 BUILD:INJECT markers found in nWave directory - indicates significant content duplication requiring consolidation"

  # Phase 3: Wave Handoff System
  phase_3_wave_handoffs:
    feature_centric_structure_exists: true
    features_using_structure_count: 1
    features_list:
      - name: "framework-rationalization"
        discuss_complete: true
        design_complete: true
        distill_complete: true
        develop_directory_exists: true
        deliver_directory_exists: true
    deliver_directory_measurement:
      measurement_command: "ls -la docs/features/framework-rationalization/ 2>/dev/null | grep -E '^d.*04-develop'"
      measured_value: true
      verification_timestamp: "2026-01-20T15:12:40Z"
      note: "Directory exists: docs/features/framework-rationalization/04-develop/ with subdirectories 01-discuss, 02-design, 03-distill"
    output_parameter_in_commands: false
    output_parameter_commands_count: 0
    wave_commands_total: 5
    wave_commands_list:
      - discuss
      - design
      - distill
      - develop
      - deliver
    evolution_archive_directory_exists: true
    evolution_archive_directory_measurement:
      measurement_command: "test -d docs/evolution && echo 'exists' || echo 'does not exist'"
      measured_value: true
      verification_timestamp: "2026-01-20T16:45:00Z"
      note: "Evolution archive EXISTS at docs/evolution/ - contains framework evolution documentation from Phase C completion"

  # Phase 4: Pre-commit Hooks
  phase_4_precommit_hooks:
    precommit_config_exists: true
    precommit_config_path: ".pre-commit-config.yaml"
    hooks_configured_count: 3
    hooks_repositories_count: 3
    hooks_configured_measurement:
      measurement_command: "grep -E '^  - repo:' .pre-commit-config.yaml | wc -l"
      measured_value: 3
      verification_timestamp: "2026-01-20T15:12:40Z"
      note: "Counts distinct repository sources: local hooks, pre-commit-hooks repo, ruff repo"
    hooks_repositories:
      - repo: "local"
        hooks: ["nwave-version-bump", "pytest-validation", "docs-version-validation"]
      - repo: "https://github.com/pre-commit/pre-commit-hooks"
        rev: "v4.5.0"
        hooks: ["trailing-whitespace", "end-of-file-fixer", "check-yaml", "check-json", "check-merge-conflict", "detect-private-key"]
      - repo: "https://github.com/astral-sh/ruff-pre-commit"
        rev: "v0.3.0"
        hooks: ["ruff", "ruff-format"]
    documentation_sync_hook_exists: false
    documentation_sync_reminders_implemented: false
    check_docs_sync_script_exists: false

  # Phase 5: Release Packaging
  phase_5_release_packaging:
    package_release_script_exists: false
    package_release_script_path: "tools/package_release.py"
    release_archives_exist: false
    releases_directory_exists: false
    releases_directory_path: "dist/releases/"
    installers:
      bash_installer_exists: true
      bash_installer_path: "scripts/install-ai-craft.sh"
      bash_installer_has_platform_param: false
      powershell_installer_exists: false
      python_universal_installer_exists: false
    checksums_generation_implemented: false
    version_file_in_releases: false

  # Phase 6: CI/CD Pipeline
  phase_6_cicd:
    github_workflows_count: 2
    github_workflows_measurement:
      measurement_command: "ls -la .github/workflows/ 2>/dev/null | grep -E '\\.yml|\\.yaml' | wc -l"
      measured_value: 2
      verification_timestamp: "2026-01-20T16:45:00Z"
      note: "Two workflow files exist: CI workflow and release workflow"
    github_workflows:
      - name: "ci.yml"
        triggers:
          - "push to master/main/develop"
          - "pull_request to master/main"
        jobs_count: 3
        jobs:
          - "quality-gates"
          - "documentation-check"
          - "pipeline-completion"
        matrix_testing_enabled: true
        platforms_tested: 3
        platforms_list:
          - "ubuntu-latest"
          - "macos-latest"
          - "windows-latest"
      - name: "release.yml"
        triggers:
          - "push to master/main with version tag"
        status: "implemented"
    release_workflow_exists: true
    release_workflow_triggered_by_tags: true
    automated_release_creation: true
    cross_platform_ci_validation: true
    installer_testing_in_ci: true

# ============================================================================
# TARGET STATE MEASUREMENTS
# ============================================================================

target_state:

  # Phase 0: Agent and Template Rationalization
  phase_0_template_rationalization:
    existing_commands_count: 20
    command_template_exists: true
    command_template_validated: true
    agent_builder_has_command_template_reference: true
    agent_builder_has_forge_command_capability: true
    agent_builder_reviewer_validates_commands: true
    commands_analyzed_for_compliance: 20
    commands_compliant_with_template: ">= 18"

  # Phase 1: Platform Abstraction Layer
  phase_1_platform_abstraction:
    supported_platforms_count: 2
    supported_platforms:
      - name: "claude-code"
        output_dir: "dist/claude-code"
        status: "implemented"
      - name: "codex"
        output_dir: "dist/codex"
        status: "implemented"
    platform_abstraction_layer_exists: true
    platform_registry_exists: true
    platform_formatter_files:
      base_py: true
      claude_py: true
      codex_py: true
      init_py: true
    tools_platforms_directory_exists: true
    multi_platform_build_enabled: true

  # Phase 2: BUILD:INCLUDE Mechanism
  phase_2_build_include:
    build_include_markers_in_source: ">= 12"
    build_include_mechanism_implemented: true
    shared_content_directory_exists: true
    radical_candor_shared_file_exists: true
    priority_validation_shared_file_exists: true
    duplicate_content_eliminated: true

  # Phase 3: Wave Handoff System
  phase_3_wave_handoffs:
    feature_centric_structure_exists: true
    output_parameter_in_commands: true
    output_parameter_commands_count: 6
    wave_commands_with_output_param:
      - discuss
      - design
      - distill
      - develop
      - deliver
      - research
    evolution_archive_directory_exists: true
    evolution_archive_path: "docs/evolution/"

  # Phase 4: Pre-commit Hooks
  phase_4_precommit_hooks:
    precommit_config_exists: true
    hooks_configured_count: ">= 10"
    documentation_sync_hook_exists: true
    documentation_sync_reminders_implemented: true
    check_docs_sync_script_exists: true
    check_docs_sync_script_path: "tools/check-docs-sync.sh"

  # Phase 5: Release Packaging
  phase_5_release_packaging:
    package_release_script_exists: true
    releases_directory_exists: true
    installers:
      bash_installer_exists: true
      bash_installer_has_platform_param: true
      powershell_installer_exists: true
      powershell_installer_path: "install.ps1"
      python_universal_installer_exists: true
      python_universal_installer_path: "install.py"
    checksums_generation_implemented: true
    version_file_in_releases: true

  # Phase 6: CI/CD Pipeline
  phase_6_cicd:
    github_workflows_count: 2
    ci_workflow:
      name: "ci.yml"
      matrix_testing_enabled: true
      platforms_tested: 3
      platforms_list:
        - "ubuntu-latest"
        - "macos-latest"
        - "windows-latest"
      installer_testing_enabled: true
    release_workflow:
      name: "release.yml"
      triggered_by_tags: true
      automated_release_creation: true
      artifacts_uploaded:
        - "nwave-{version}-claude-code.zip"
        - "nwave-{version}-codex.zip"
        - "checksums.txt"

# ============================================================================
# SUCCESS CRITERIA PER PHASE
# ============================================================================

success_criteria:

  phase_0:
    name: "Agent and Template Rationalization"
    description: "Improve COMMAND_TEMPLATE and update agent-builder capabilities"
    criteria:
      - id: "P0-01"
        description: "All existing commands analyzed for template compliance"
        metric: "commands_analyzed_count"
        target: 20
        current: 0
      - id: "P0-02"
        description: "Agent-builder references COMMAND_TEMPLATE in dependencies"
        metric: "agent_builder_has_command_template_reference"
        target: true
        current: false
      - id: "P0-03"
        description: "Agent-builder has forge-command capability"
        metric: "agent_builder_has_forge_command_capability"
        target: true
        current: false
      - id: "P0-04"
        description: "Agent-builder-reviewer validates command template compliance"
        metric: "agent_builder_reviewer_validates_commands"
        target: true
        current: false

  phase_1:
    name: "Platform Abstraction Layer"
    description: "Multi-platform build system with strategy pattern"
    criteria:
      - id: "P1-01"
        description: "Platform abstraction layer implemented"
        metric: "tools/platforms/ directory with 4 files"
        target: 4
        current: 0
      - id: "P1-02"
        description: "Build produces both platform outputs"
        metric: "supported_platforms_count"
        target: 2
        current: 1
      - id: "P1-03"
        description: "Platform registry provides access to formatters"
        metric: "platform_registry_exists"
        target: true
        current: false
      - id: "P1-04"
        description: "Claude Code formatter generates correct metadata"
        metric: "claude_formatter_operational"
        target: true
        current: false
      - id: "P1-05"
        description: "Codex formatter generates platform-specific metadata"
        metric: "codex_formatter_operational"
        target: true
        current: false

  phase_2:
    name: "BUILD:INCLUDE Mechanism"
    description: "Single source of truth for shared content"
    criteria:
      - id: "P2-01"
        description: "BUILD:INCLUDE mechanism implemented in dependency resolver"
        metric: "build_include_mechanism_implemented"
        target: true
        current: false
      - id: "P2-02"
        description: "Shared content directory created"
        metric: "nWave/data/core/ exists"
        target: true
        current: false
      - id: "P2-03"
        description: "Radical Candor shared file created"
        metric: "radical_candor_shared_file_exists"
        target: true
        current: false
      - id: "P2-04"
        description: "BUILD:INCLUDE markers replace content correctly"
        metric: "build_include_markers_functional"
        target: true
        current: false
      - id: "P2-05"
        description: "No conflicts between BUILD:INCLUDE and BUILD:INJECT"
        metric: "both_mechanisms_coexist"
        target: true
        current: "not_applicable"

  phase_3:
    name: "Wave Handoff System"
    description: "Feature-centric output organization"
    criteria:
      - id: "P3-01"
        description: "All wave commands support --output parameter"
        metric: "output_parameter_commands_count"
        target: 6
        current: 0
      - id: "P3-02"
        description: "Feature-centric directory structure documented"
        metric: "feature_centric_structure_exists"
        target: true
        current: true
      - id: "P3-03"
        description: "Evolution archive directory exists"
        metric: "docs/evolution/ directory exists"
        target: true
        current: false
      - id: "P3-04"
        description: "Wave handoff documents contain required sections"
        metric: "handoff_document_compliance_rate"
        target: ">= 0.95"
        current: "measured_on_existing_feature"

  phase_4:
    name: "Pre-commit Hooks Integration"
    description: "Documentation sync validation"
    criteria:
      - id: "P4-01"
        description: "Documentation sync hook configured"
        metric: "documentation_sync_hook_exists"
        target: true
        current: false
      - id: "P4-02"
        description: "check-docs-sync.sh script created"
        metric: "check_docs_sync_script_exists"
        target: true
        current: false
      - id: "P4-03"
        description: "Hook warns on agent file changes"
        metric: "agent_change_warning_functional"
        target: true
        current: false
      - id: "P4-04"
        description: "Hook warns on command file changes"
        metric: "command_change_warning_functional"
        target: true
        current: false

  phase_5:
    name: "Release Packaging System"
    description: "Automated release distribution"
    criteria:
      - id: "P5-01"
        description: "package_release.py script created"
        metric: "package_release_script_exists"
        target: true
        current: false
      - id: "P5-02"
        description: "ZIP archives created for each platform"
        metric: "release_archives_count"
        target: 2
        current: 0
      - id: "P5-03"
        description: "Checksums generated for verification"
        metric: "checksums_generation_implemented"
        target: true
        current: false
      - id: "P5-04"
        description: "Bash installer has --platform parameter"
        metric: "bash_installer_has_platform_param"
        target: true
        current: false
      - id: "P5-05"
        description: "PowerShell installer created"
        metric: "powershell_installer_exists"
        target: true
        current: false
      - id: "P5-06"
        description: "Python universal installer created"
        metric: "python_universal_installer_exists"
        target: true
        current: false

  phase_6:
    name: "CI/CD Integration"
    description: "Automated build and release pipeline"
    criteria:
      - id: "P6-01"
        description: "CI workflow validates build on all platforms"
        metric: "ci_platforms_tested"
        target: 3
        current: 1
      - id: "P6-02"
        description: "CI workflow tests installers"
        metric: "installer_testing_in_ci"
        target: true
        current: false
      - id: "P6-03"
        description: "Release workflow triggers on version tags"
        metric: "release_workflow_triggered_by_tags"
        target: true
        current: false
      - id: "P6-04"
        description: "Release workflow creates GitHub release with artifacts"
        metric: "automated_release_creation"
        target: true
        current: false
      - id: "P6-05"
        description: "Release workflow uploads platform archives"
        metric: "release_artifacts_uploaded"
        target: 3
        current: 0

# ============================================================================
# SUMMARY METRICS
# ============================================================================

summary:
  total_success_criteria: 29
  criteria_currently_met: 2
  criteria_completion_percentage: 6.9

  phase_completion_status:
    phase_0: "not_started"
    phase_1: "not_started"
    phase_2: "not_started"
    phase_3: "partially_complete"
    phase_4: "partially_complete"
    phase_5: "not_started"
    phase_6: "partially_complete"

  blocking_dependencies:
    - "Phase 0 blocks all other phases (template foundation)"
    - "Phase 1 blocks Phases 2, 3, 5, 6 (platform abstraction)"
    - "Phase 5 blocks Phase 6 (release packaging required for CI/CD)"

  parallel_execution_possible:
    - "Phase 4 can run in parallel (no dependencies)"

# ============================================================================
# MEASUREMENT METHODOLOGY NOTES
# ============================================================================

methodology_notes:
  - "Measurements taken via file system inspection on 2026-01-20"
  - "File counts verified using glob pattern matching"
  - "Content markers counted using grep searches"
  - "Directory existence verified via bash ls commands"
  - "Boolean values represent feature presence/absence"
  - "String values with 'unknown' indicate unmeasured metrics"
  - "'estimated' values require manual verification"

# ============================================================================
# REVIEW VALIDATION
# ============================================================================

validation:
  status: approved
  reviewer: software-crafter-reviewer
  review_date: "2026-01-20T12:30:00Z"
  approval_type: conditional
  notes: |
    Baseline APPROVED for roadmap creation with minor observations:

    STRENGTHS:
    - Measurements are quantitative and verifiable via documented methodology
    - Current state values reference specific paths and counts
    - Target state values are realistic increments
    - Success criteria are binary/numeric (pass/fail determinable)
    - Phase dependencies and parallel execution clearly documented
    - 29 success criteria provide comprehensive coverage

    OBSERVATIONS (non-blocking):
    - Line 39: commands_exceeding_60_lines is unmeasured - acceptable as
      "unknown_not_measured" is explicit about missing data
    - Line 68: duplicate_content_agents_count is estimated - acceptable as
      "estimated_" prefix clearly indicates unverified status
    - Lines 351, 376: String descriptions instead of concrete values -
      acceptable as these are edge cases with appropriate context

    VERIFICATION:
    - All measurements can be re-validated using documented methodology
    - No vague or subjective metrics without explicit qualification
    - Success criteria are measurable (true/false or numeric comparison)

    CONCLUSION: Baseline is SUFFICIENT for roadmap creation. The minor
    unmeasured items do not block implementation planning and are
    explicitly marked as such.
